<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zq.admin.dao.RightDao">
	
	<!-- resultMap -->
	<resultMap type="com.zq.admin.domain.entity.Right" id="resultMap">
		<result property="rightId" column="right_id" />
		<result property="rule" column="rule" />
		<result property="rightName" column="right_name" />
		<result property="rightCategoryId" column="right_category_id" />
		<result property="sortId" column="sort_Id" />
		<result property="createDate" column="create_date" />
		<result property="updateDate" column="update_date" />
	</resultMap>

	<!-- 保存 -->
	<insert id="save" parameterType="com.zq.admin.domain.entity.Right" useGeneratedKeys="true" keyProperty="rightId">
		insert into t_admin_right (
			rule
			,right_name
			,right_category_id
			,sort_Id
			,create_date
			,update_date
		)
		 values
		 (
			#{rule}
				,#{rightName}
				,#{rightCategoryId}
				,#{sortId}
				,#{createDate}
				,#{updateDate}
		)
	</insert>
	
	<!-- 删除-->
	<delete id="delete" parameterType="Integer">
		delete from t_admin_right where right_id = #{rightId};
	</delete>
	
	<!-- 批量删除 -->
	<delete id="deleteByBatch"  parameterType="java.util.List">
		delete from
		t_admin_right
		where right_id in
		<foreach collection="list" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</delete>
	
	<!-- 修改-->
	<update id="update" parameterType="com.zq.admin.domain.entity.Right" >
		update t_admin_right 
			set update_Date = now()
				,rule = #{rule}
				,right_name = #{rightName}
				,right_category_id = #{rightCategoryId}
				,sort_Id = #{sortId}
				,create_date = #{createDate}
				,update_date = #{updateDate}
		where right_id = #{rightId}
	</update>
	
	<!-- 根据id获取对象-->
 	<select id="get" parameterType="Integer" resultMap="resultMap">
 		select 
				right_id
				,rule
				,right_name
				,right_category_id
				,sort_Id
				,create_date
				,update_date
		 from t_admin_right where right_id = #{rightId} 
		 order by sort_id ,create_date desc limit 1;
 	</select>
 	
 	<!-- 通过Map单个查找-->
	<select id="getOneByMap" parameterType="Map" resultMap="resultMap">
		select 
				right_id
				,rule
				,right_name
				,right_category_id
				,sort_Id
				,create_date
				,update_date
		 from
		t_admin_right
		<where>
 			<if test="null != rule and ''!= rule">
			rule = #{rule}
			</if>
			<if test="null != rightName and ''!= rightName">
			and right_name = #{rightName}
			</if> 
			<if test="null != rightCategoryId ">
			and right_category_id = #{rightCategoryId}
			</if> 
			<if test="null != sortId ">
			and sort_Id = #{sortId}
			</if> 
			<if test="null != createDate and ''!= createDate">
			and create_date = #{createDate}
			</if> 
			<if test="null != updateDate and ''!= updateDate">
			and update_date = #{updateDate}
			</if> 
		</where>
		order by sort_id ,create_date desc limit 1;
	</select>
	
	<!-- 列表查询 -->
	<select id="select" parameterType="Map" resultMap="resultMap">
 		select 
				right_id
				,rule
				,right_name
				,right_category_id
				,sort_Id
				,create_date
				,update_date
 		 from t_admin_right
 		<where>
 			<if test="null != rule and ''!= rule">
			rule = #{rule}
			</if>
			<if test="null != rightName and ''!= rightName">
			and right_name = #{rightName}
			</if> 
			<if test="null != rightCategoryId ">
			and right_category_id = #{rightCategoryId}
			</if> 
			<if test="null != sortId ">
			and sort_Id = #{sortId}
			</if> 
			<if test="null != createDate and ''!= createDate">
			and create_date = #{createDate}
			</if> 
			<if test="null != updateDate and ''!= updateDate">
			and update_date = #{updateDate}
			</if> 
 		</where>
 		order by sort_id ,create_date desc;
 	</select>
 	
 	<!-- 分页查找 -->
	<select id="findByPage" parameterType="Map" resultMap="resultMap">
		select 
				right_id
				,rule
				,right_name
				,right_category_id
				,sort_Id
				,create_date
				,update_date
 		 from t_admin_right
 		<where>
 			<if test="null != rightVo.rightId ">
			right_id = #{rightVo.rightId} 
			</if>	
			<if test="null != rightVo.rule and ''!= rightVo.rule">
			and rule = #{rightVo.rule}
			</if> 
			<if test="null != rightVo.rightName and ''!= rightVo.rightName">
			and right_name = #{rightVo.rightName}
			</if> 
			<if test="null != rightVo.rightCategoryId ">
			and right_category_id = #{rightVo.rightCategoryId}
			</if> 
			<if test="null != rightVo.sortId ">
			and sort_Id = #{rightVo.sortId}
			</if> 
			<if test="rightVo.startDate != null and '' != rightVo.startDate and rightVo.endDate != null and '' != rightVo.endDate">
			    <![CDATA[and create_date >= #{rightVo.startDate} and create_date <= #{rightVo.endDate}]]>
			  </if>
 		</where>
 		order by sort_id ,create_date desc   
 		<if test="null != page and '' != page and null != page.begin and '' != page.begin and null !=page.limit  and '' != page.limit">
 		 limit ${page.begin} , ${page.limit};
 		 </if>
	</select>
	
	<!-- 分页查找数量 -->
	<select id="findByPageCount" parameterType="Map" resultType="Integer">
		select count(1)  from t_admin_right
 		<where>
 			<if test="null != rightVo.rightId ">
			right_id = #{rightVo.rightId} 
			</if>	
			<if test="null != rightVo.rule and ''!= rightVo.rule">
			and rule = #{rightVo.rule}
			</if> 
			<if test="null != rightVo.rightName and ''!= rightVo.rightName">
			and right_name = #{rightVo.rightName}
			</if> 
			<if test="null != rightVo.rightCategoryId ">
			and right_category_id = #{rightVo.rightCategoryId}
			</if> 
			<if test="null != rightVo.sortId ">
			and sort_Id = #{rightVo.sortId}
			</if> 
			<if test="rightVo.startDate != null and '' != rightVo.startDate and rightVo.endDate != null and '' != rightVo.endDate">
			    <![CDATA[and create_date >= #{rightVo.startDate} and create_date <= #{rightVo.endDate}]]>
			 </if>
 		</where>
 		order by sort_id ,create_date desc ;
	</select>

</mapper>